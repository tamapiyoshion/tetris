:root{
  --bg:#111;
  --fg:#fff;
  --border:#555;

  --hud-h: 108px;    /* HUDの高さ */
  --pad-h: 96px;     /* 操作パッドの高さ（実寸はボタンで変動するが目安） */
  --gap: 10px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:sans-serif;
  text-align:center;

  overscroll-behavior:none;
}

.wrap{
  display:flex;
  gap:16px;
  padding:16px;
  justify-content:center;
  align-items:flex-start;
}

/* ===== ステージ ===== */
.stage{
  position:relative;
  width: fit-content;
  margin: 0 auto;
}

/* HUD（スマホで常時表示） */
.hud{
  display:flex;
  gap:10px;
  justify-content:space-between;
  align-items:center;

  width: min(92vw, 420px);
  margin: 0 auto 10px auto;
}
.hudBox{
  border:2px solid var(--border);
  background:#151515;
  padding:8px;
  flex: 1;
  min-width: 0;
}
.hudLabel{
  font-size:11px;
  opacity:0.85;
  margin-bottom:6px;
}
.hudValue{
  font-size:22px;
  font-weight:700;
  line-height:1;
}

/* NEXTキャンバスはスマホでは小さく表示 */
#next{
  display:block;
  width: 76px;
  height: 76px;
  margin: 0 auto;
  background:#000;
  border:2px solid var(--border);
}

/* 盤面：内部解像度は560×1120固定。表示だけ調整 */
#game{
  display:block;
  margin:0 auto;

  background:#000;
  border:2px solid var(--border);

  /* 画面幅に合わせる */
  width: min(92vw, 420px);
  height: auto;
  aspect-ratio: 1 / 2;

  /* HUD + 操作パッドを差し引いて、1画面に必ず収める */
  max-height: calc(100svh - var(--hud-h) - var(--pad-h) - 40px);

  touch-action:none;
}

/* 操作パッド：画面下固定（HUDを上にしたので“隠れ”が起きにくい） */
.touch{
  position:fixed;
  left:0;
  right:0;
  bottom:10px;

  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:nowrap;

  padding: 0 10px;
  z-index:999;
}

.touch .btn{
  width:62px;
  height:62px;
  font-size:22px;
  border-radius:12px;
  border:2px solid var(--border);
  background:#222;
  color:#fff;
}

.touch .btn.wide{
  width:98px;
  font-size:16px;
}

/* ===== PC用右パネル ===== */
.panel{
  width:220px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.box{
  border:2px solid var(--border);
  background:#151515;
  padding:12px;
  text-align:left;
}
.label{
  font-size:12px;
  opacity:.85;
  margin-bottom:8px;
}
.pcNext{
  background:#000;
  border:2px solid var(--border);
  width:180px;
  height:180px;
}
.pcValue{
  font-size:28px;
  font-weight:700;
  line-height:1;
}
.hint div{
  font-size:13px;
  line-height:1.6;
}

/* スマホでは右パネルを隠す（HUDが代わり） */
@media (max-width: 820px){
  .wrap{
    flex-direction:column;
    align-items:center;
  }
  .panel{
    display:none;
  }
}

/* PCではHUDは邪魔なので小さめに。NEXTもPCパネル側を使う */
@media (min-width: 821px){
  .hud{
    width: min(420px, 50vw);
  }
  #next{
    width: 90px;
    height: 90px;
  }
  /* PCでは操作パッドを隠す（キーボード操作） */
  .touch{
    display:none;
  }
}
