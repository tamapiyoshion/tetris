:root{
  --bg:#111;
  --fg:#fff;
  --border:#555;

  /* PC表示サイズの目安（必要なら 300〜420 で調整） */
  --game-max-w-desktop: 340px;

  /* 縦はみ出し防止（PC/スマホ共通） */
  --game-max-h: calc(100svh - 24px);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:sans-serif;
  text-align:center;

  /* 画面の“戻る/引っ張り”を抑える（ただしスクロールは殺さない） */
  overscroll-behavior: none;
}

.wrap{
  display:flex;
  gap:16px;
  padding:16px;
  justify-content:center;
  align-items:flex-start;
}

/* 盤面側 */
.stage{
  position:relative;
}

/* 盤面：内部解像度は固定（560x1120）で、表示だけ自動調整 */
#game{
  background:#000;
  border:2px solid var(--border);
  display:block;
  margin:0 auto;

  width: min(var(--game-max-w-desktop), 92vw);
  max-height: var(--game-max-h);
  height:auto;

  aspect-ratio: 1 / 2;

  /* スマホのジェスチャ（ダブルタップ拡大/スワイプ）をゲーム上で抑止 */
  touch-action: none;
}

/* NEXT */
#next{
  background:#000;
  border:2px solid var(--border);
  width:180px;
  height:180px;
}

/* 右パネル */
.panel{
  width:220px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.box{
  border:2px solid var(--border);
  background:#151515;
  padding:12px;
  text-align:left;
}
.label{
  font-size:12px;
  opacity:.85;
  margin-bottom:8px;
}
#score,#lines{
  font-size:28px;
  font-weight:700;
  line-height:1;
}
.hint div{
  font-size:13px;
  line-height:1.6;
}

/* スマホ：縦並び＋盤面は小さくなりすぎない */
@media (max-width: 820px){
  .wrap{
    flex-direction:column;
    align-items:center;
  }
  .panel{
    width:min(92vw, 420px);
  }
  .box{ text-align:center; }

  #game{
    width: min(92vw, 420px);
    /* 操作パッド分の余白を縦側で確保（見切れ防止） */
    max-height: calc(100svh - 210px);
  }
}

/* タッチ操作パッド：モバイル時のみ表示。画面下に“重ならず”配置 */
.touch{
  display:none;
  margin-top: 12px;
  gap:10px;
  justify-content:center;
  flex-wrap: wrap;
  z-index: 10;
}

.touch .btn{
  width:64px;
  height:64px;
  font-size:22px;
  border-radius:12px;
  border:2px solid var(--border);
  background:#222;
  color:#fff;
}

.touch .btn.wide{
  width:120px;
  font-size:16px;
}

@media (max-width: 820px){
  .touch{ display:flex; }
}
