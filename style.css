:root{
  --bg:#111;
  --fg:#fff;
  --border:#555;

  /* 盤面は「幅と高さの両方で収める」 */
  --game-max-w-desktop: 340px;      /* PC側の目安（必要なら300〜420） */
  --game-max-h: calc(100vh - 24px); /* 縦はみ出し防止 */
}

*{ box-sizing:border-box; }

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:sans-serif;
  text-align:center;

  /* スクロールや引っ張り挙動を抑止（ゲーム向け） */
  overscroll-behavior:none;
  touch-action:none;
}

.wrap{
  display:flex;
  gap:16px;
  padding:16px;
  justify-content:center;
  align-items:flex-start;
}

/* 盤面側 */
.stage{
  position:relative;
}

/* 内部解像度は 560x1120 のまま。表示だけ自動調整 */
#game{
  background:#000;
  border:2px solid var(--border);
  display:block;
  margin:0 auto;

  /* PC：指定幅を基準にしつつ、画面幅に合わせて縮む */
  width: min(var(--game-max-w-desktop), 92vw);

  /* 重要：縦でも制限して「必ず」画面内に入れる */
  max-height: var(--game-max-h);
  height:auto;

  /* 縦横比(560:1120=1:2)を保持 */
  aspect-ratio: 1 / 2;
}

/* NEXT */
#next{
  background:#000;
  border:2px solid var(--border);
  width:180px;
  height:180px;
}

/* 右パネル */
.panel{
  width:220px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.box{
  border:2px solid var(--border);
  background:#151515;
  padding:12px;
  text-align:left;
}
.label{
  font-size:12px;
  opacity:.85;
  margin-bottom:8px;
}
#score,#lines{
  font-size:28px;
  font-weight:700;
  line-height:1;
}
.hint div{
  font-size:13px;
  line-height:1.6;
}

/* スマホ：盤面を大きめに（小さくなりすぎない） */
@media (max-width: 480px){
  .wrap{
    flex-direction:column;
    align-items:center;
  }
  .panel{
    width:min(92vw, 420px);
  }
  .box{ text-align:center; }

  #game{
    /* スマホは画面幅を優先して大きく */
    width: min(92vw, 420px);
    max-height: calc(100vh - 140px); /* 操作ボタン分の余白を確保 */
  }
}

/* タッチ操作ボタン：スマホだけ表示（PCは非表示） */
.touch{
  position:fixed;
  left:0;
  right:0;
  bottom:10px;
  display:none;
  gap:10px;
  justify-content:center;
  z-index:999;
  pointer-events:auto;
}
.touch .btn{
  width:64px;
  height:64px;
  font-size:22px;
  border-radius:12px;
  border:2px solid var(--border);
  background:#222;
  color:#fff;
}
.touch .btn.wide{
  width:96px;
  font-size:16px;
}
@media (max-width: 820px){
  .touch{ display:flex; }
}

/* 画面が短い環境での保険（スクロールバーを出さない） */
html, body{
  height:100%;
}
